<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Twitter Card-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@{{app.twitter}}">
    <meta name="twitter:creator" content="@{{app.twitter}}">
    <meta name="twitter:url" content="{{app.baseUrl}}{{page.url}}">
    <meta name="twitter:title" content="{{app.title}}">
    <meta name="twitter:description" content="{{content | striptags | truncate(196) }}">
    <meta name="twitter:image" content="{{app.thumb}}">

    <!--Schema-->
    <link rel="author" href="{{app.baseUrl}}">
    <link rel="publisher" href="{{app.baseUrl}}">
    <meta itemprop="name" content="{{app.title}}">
    <meta itemprop="description" content="{{content | striptags | truncate(196) }}">
    <meta itemprop="image" content="{{app.thumb}}">

    <!-- Facebook OpenGraph -->
    <meta property="og:url" content="{{app.baseUrl}}{{page.url}}">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{app.title}}">
    <meta property="og:image" content="{{app.thumb}}">
    <meta property="og:description" content="{{content | striptags | truncate(196) }}">
    <meta property="og:site_name" content="{{app.title}}">
    <meta property="og:locale" content="en_US">
    <meta property="article:author" content="{{app.baseUrl}}">

    <link rel="stylesheet" href="/assets/styles/main.css">

    {% set titleComplement %}
    {%if page.url != '/' %}
      | {{ eleventyNavigation.key }}
    {% else %}
      | Web Development
    {% endif %}
    {% endset %}

    <title>Kaisermann {{titleComplement}}</title>

    {% if build.isProd %}
      <script>
        {% set gtagJS %}
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-75837777-1');
        {% endset %}

        {{ gtagJS | jsmin | safe  }}
      </script>
    {% endif %}
  </head>
  <body {% if bodyClass %} class="{{ bodyClass }}" {% endif %}>
    <div class="page__wrapper">
      <video class="page__background" muted autoplay playsinline loop>
        <source src="/assets/images/glitch.webm" type="video/webm"/>
        <source src="/assets/images/glitch.mp4" type="video/mp4"/>
      </video>

      <div class="page__container">
        {% include 'header.njk' %}

        <div class="page__content">
          {{ content | safe }}
        </div>

        {% include 'footer.njk' %}
      </div>
    </div>

    {% if build.isProd %}
      <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-75837777-1"></script>
    {% endif %}

    <script>
      {% set dateJS %}
      document
        .querySelector('.js-header-date')
        .innerHTML = new Intl
        .DateTimeFormat('en-US', {
          month: 'short',
          day: 'numeric',
          year: 'numeric'
        })
        .format(new Date()){% endset %}

        {{ dateJS | jsmin | safe  }}
    </script>
  </body>
</html>
